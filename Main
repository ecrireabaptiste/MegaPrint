
class Leg:
    def DefineLeg(self, dist_angle, curbature, printing, speed):
        self.dist_angle = dist_angle
        self.curbature = curbature
        self.printing = printing
        self.speed = speed
        return self
    def InputLegInfo(self):
        self.dist_angle = float(input('Enter distance or angle '))
        self.curbature = float(input('Enter Curbature '))
        self.printing = int(input('Enter 1 if print '))
        self.speed = float(input('Enter Speed '))  
    def PrintLegInfo(self):
        print(self.dist_angle, self.curbature, self.printing, self.speed)

class Trajectory:
    def __init__(self):
        self.traj = []
    def AppendLeg(self, dist_angle, curbature, printing, speed):
        leg = Leg()
        leg.DefineLeg(dist_angle, curbature, printing, speed)
        self.traj.append(leg)      
    def CreateSample(self):
        self.AppendLeg(90, 999, 1, 10)
        self.AppendLeg(100, 0, 1, 10)   
    def Print(self):
        for leg in self.traj:
            leg.PrintLegInfo()
class Config:
    def __init__(self):
        self.nbsteps = 200
        self.l = 256/2
        self.phiwheel = 122 

class Cmd:
    def __init__(self):
        self.FreqR = 0
        self.FreqL = 0
        self.DirR = 1
        self.DirL = 1
        self.t = 0
    def ProcessLeg(self, leg, c)
        self.t = leg.dist_angle/leg.speed
        if abs(leg.curbature) = 999:
            self.DirR = dir_sign(leg.curbature)
            self.DirL = dir_sign(-leg.curbature)
            self.FreqR = abss(leg.speed*c.nbsteps*c.l/c.phiwheel)
            self.FreqL = abss(leg.speed*c.nbsteps*c.l/c.phiwheel)
        else:
            self.DirR = dir_sign(leg.speed*(1-leg.curbature*c.l))
            self.DirL = dir_sign(leg.speed*(1+leg.curbature*c.l))
            self.FreqR = c.nbsteps/c.phiwheel*abss(leg.speed*(1-leg.curbature*c.l))
            self.FreqL = c.nbsteps/c.phiwheel*abss(leg.speed*(1+leg.curbature*c.l))
        
    def abss(x):
        return max(abs(x), 0.01)
    def dir_sign(x):
        if (x >= 0):
            return 1
        else:
            return 0
        
class CmdSequence:
    def __init__(self):
        self.cmdseq = []
    def Append(self, leg):
        cmd = Cmd()
        cmd.ProcessLeg(leg)
        self.cmdseq.append(cmd)      
    def Print(self):
        for leg in self.traj:
            leg.PrintLegInfo()


# Create trajectory
config = Config()
traj = Trajectory()
traj.CreateSample()
traj.Print()

# Create stepper-command from trajectory

# Process stepper-command

# shut down
